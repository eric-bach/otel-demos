Metrics:
  # Define your metrics
  - Name: SuccessfulRequests
    Unit: Count
    Expression: sum(success_count)
  - Name: FailedRequests
    Unit: Count
    Expression: sum(error_count)
  - Name: Latency
    Unit: Milliseconds
    Expression: avg(duration_ms)

Alarms:
  # Define your alarms
  - Name: HighErrorRate
    Metric: FailedRequests
    Threshold: 5
    Period: 300
    EvaluationPeriods: 2
    ComparisonOperator: GreaterThanThreshold
    TreatMissingData: notBreaching

  - Name: HighLatency
    Metric: Latency
    Threshold: 1000
    Period: 300
    EvaluationPeriods: 2
    ComparisonOperator: GreaterThanThreshold
    TreatMissingData: notBreaching

Dashboard:
  # Define your dashboard widgets
  Widgets:
    - Type: metric
      Properties:
        Title: Request Count
        Period: 300
        Region: ${AWS::Region}
        Metrics:
          - Name: SuccessfulRequests
          - Name: FailedRequests

    - Type: metric
      Properties:
        Title: Latency
        Period: 300
        Region: ${AWS::Region}
        Metrics:
          - Name: Latency